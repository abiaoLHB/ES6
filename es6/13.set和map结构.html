<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>set和map</title>
</head>

<body>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <script>
        // for of
        const arr = ['red', 'green', 'blue']
        for (let item of arr) {
            console.log(item)
        }
        for (let index in arr) {
            console.log(index)
        }

        console.log('----------')

        // 1、set：es6提供了新的数据接口Set，它类似数组，但是成员的值都是唯一的，没有重复的值
        const s = new Set();

        [2, 3, 5, 4, 5, 2, 2].forEach(x => {
            console.log(x)
            s.add(x)
        });

        for (let i of s) {
            console.log(i);
        }

        // 用数组初始化set结构
        let arr1 = new Set([1, 1, 5, 5, 6, 6])
        console.log(arr1)
        console.log(arr1.size)

        let divlist = new Set(document.querySelectorAll('div'))
        console.log(divlist.size)

        // 数组去重
        console.log([...new Set([8, 8, 7, 7])])

        // 字符串去重
        console.log([...new Set('aabbccddeeff')].join(''))

        // 数组去重的另一种方法：因为Array.from可以吧set结构转换为数组
        function dedupe(array = []) {
            return Array.from(new Set(array))
        }

        let array2 = ['a', 'a', 'b', 'm', 'm']
        let newArray = dedupe(array2)
        console.log(newArray)

        // set结构的四种遍历方式
        let set1 = new Set(['age', 'address', 'job'])
        for (let item of set1.keys()) {
            console.log(item)
        }

        for (let item of set1.values()) {
            console.log(item)
        }

        for (let item of set1.entries()) {
            console.log(item)
        }

        // test filter
        var testArray = [1, 2, 3, 4, 5, 6, 7]
        let newTestArray = testArray.filter(x => {
            return x > 3
        })
        console.log('--------newTestArray--------')
        console.log(newTestArray)
        console.log('--------newTestArray--------')


        let seta = new Set([1, 2, 3])
        let setb = new Set([4, 3, 2])
        // 求并集
        let union = new Set([...seta, ...setb])
        console.log(union) // {1, 2, 3, 4}
        console.log(Array.from(union)) //  [1, 2, 3, 4]

        // 交集
        let intersect = new Set([...seta].filter(x => setb.has(x)))
        console.log(intersect) //  {2, 3}

        // a相对于b的差集
        let difference = new Set([...seta].filter(x => !setb.has(x)))
        console.log(difference) //{1}

    </script>


    <script>
            // weakSet 只能放置对象
            (function () {
                const ws = new WeakSet()
                // ws.add(1)//Invalid value used in weak set
                ws.add({ name: 'lhb' })


                console.log(ws)
            })();

    </script>
</body>

</html>